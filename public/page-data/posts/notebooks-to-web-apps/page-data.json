{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/notebooks-to-web-apps","result":{"data":{"markdownRemark":{"id":"09dcb6f5-02dd-5015-bb95-57c35fafb2be","html":"<p>I love Jupyter notebooks!  If I have the choice to code in a notebook vs another IDE, I will also choose a notebook! Recently, a new python library was released called <a href=\"https://www.streamlit.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Streamlit</a> that lets you make really cool web apps quickly and simply.  By default, <a href=\"https://www.streamlit.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Streamlit</a> only works with .py files and built in Jupyter functions cause errors :(  But with a little extra work, we can get it to work  in Jupyter. </p>\n<p>First let’s import our data and make a streamlit bar graph. </p>\n<p><em>For this example, we will be making a web app that shows Presidential Candidates’s Online Attention.</em></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">df_online<span class=\"token operator\">=</span>pd<span class=\"token punctuation\">.</span>read_csv<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://raw.githubusercontent.com/fivethirtyeight/data/master/media-mentions-2020/online_weekly.csv\"</span><span class=\"token punctuation\">)</span>\ndf_online<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8e2c36b16a4c6c016ca930061217f91f/eee07/image-20200206142548639.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.48157248157248%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5UlEQVQY0y2Q207DMBBE+///hcQDQlBaAk3SNnFuttPcUyqR+LCxWHm0Y49m5dndOo8sAudWhr7jPk88fu7caovRFboqPd96VRaee03uRZ5RW4NbF6ZxoOtadkg5QVpajuGV77PieLpIz8hMS5gUxKpC6ZZzpjldc8+VbgjilH0QEaUl758RqjQy0Dk5TkyatyDmECY8vx74uuT0D4gzS1K1nuf1SKQMzbzS3FfRjPd8nK48vexJC/v/QxnYNjfKIsdKzEyltLcaJMogMbY4uIV5GmnkfV1+PTrxbGuwRqPShL7r+AOgWCuwZpW16AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/8e2c36b16a4c6c016ca930061217f91f/8ac56/image-20200206142548639.webp 240w,\n/static/8e2c36b16a4c6c016ca930061217f91f/d3be9/image-20200206142548639.webp 480w,\n/static/8e2c36b16a4c6c016ca930061217f91f/e46b2/image-20200206142548639.webp 960w,\n/static/8e2c36b16a4c6c016ca930061217f91f/f992d/image-20200206142548639.webp 1440w,\n/static/8e2c36b16a4c6c016ca930061217f91f/55e7f/image-20200206142548639.webp 1628w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/8e2c36b16a4c6c016ca930061217f91f/8ff5a/image-20200206142548639.png 240w,\n/static/8e2c36b16a4c6c016ca930061217f91f/e85cb/image-20200206142548639.png 480w,\n/static/8e2c36b16a4c6c016ca930061217f91f/d9199/image-20200206142548639.png 960w,\n/static/8e2c36b16a4c6c016ca930061217f91f/07a9c/image-20200206142548639.png 1440w,\n/static/8e2c36b16a4c6c016ca930061217f91f/eee07/image-20200206142548639.png 1628w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/8e2c36b16a4c6c016ca930061217f91f/d9199/image-20200206142548639.png\"\n          alt=\"image-20200206142548639\"\n          title=\"image-20200206142548639\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<p>Let’s process our data  so we can get number of stories and the candidate in one data frame. </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">dfO<span class=\"token operator\">=</span> df_online<span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'matched_stories'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n\ndfO<span class=\"token operator\">=</span> dfO<span class=\"token punctuation\">.</span>groupby<span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"matched_stories\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\ndfO <span class=\"token operator\">=</span> pd<span class=\"token punctuation\">.</span>DataFrame<span class=\"token punctuation\">(</span>dfO<span class=\"token punctuation\">)</span>\n\ndfToShow<span class=\"token operator\">=</span> dfO<span class=\"token punctuation\">.</span>sort_values<span class=\"token punctuation\">(</span><span class=\"token string\">\"matched_stories\"</span><span class=\"token punctuation\">,</span> ascending<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\ndfToShow<span class=\"token punctuation\">.</span>head<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 656px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/59ba460e6c4fa597eff33601850f88e0/748f4/image-20200206142857331.png\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.71951219512195%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAByklEQVQ4y5VTa7OaQAz1//+nfui0dnxcwSkocPWCoFDfvESFhT3dpBfb62g73ZlM1iSeTc4JnTo9ovRnqLYhxH4NWZWgI6W8+db+dtp8p7leIJI96ixBU2SQdQ15B9QW53kOwzCgaRqm0ynm8zl0XYfneTfQDv7jlGWJ1WoF3/cRhiGiKMJyucRut/sN+KGLdy+EQFVVqFW3dB8MBuj1ehz758j3AQKhF7fbLXfRjmWaJsdaW6/XsG0bk8mEO26a5jEgJS6XC/8+HA7MFYGRP5/PbJQ/nU7MJz1GYz/ssA1SsWVZWCwWXOy6Hnt6TP5BSxAEXPOBw0eAaZpy8UqNTOO4rotAARIIGdFCAhEYUbLZbJ4Avt8dx4Y2GkFX6+EonsbjsRp5ojrPUajui+KELEs53+12eW2eiiIaiSAW0F4jDK0A+izCi73EyAmxOFac88mOAn3TwxfNhuFtULMm8h5Qoqol3GOD4esPfNZm+PrdwzczQNdQ4+0F3lTu7dDAjSXHPg3VBO7uGeAvlVtRNKUgfRX9fh8vigL6UihHRnfHcRQVFvP7dG3I0wLnWYY4jpEkCe8dEX+9XjlXKUFIlEzVZErAoihu//8JzXLfwUZ8CZ8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;\"></span>\n  <picture>\n        <source srcset=\"/static/59ba460e6c4fa597eff33601850f88e0/8ac56/image-20200206142857331.webp 240w,\n/static/59ba460e6c4fa597eff33601850f88e0/d3be9/image-20200206142857331.webp 480w,\n/static/59ba460e6c4fa597eff33601850f88e0/31099/image-20200206142857331.webp 656w\" sizes=\"(max-width: 656px) 100vw, 656px\" type=\"image/webp\">\n        <source srcset=\"/static/59ba460e6c4fa597eff33601850f88e0/8ff5a/image-20200206142857331.png 240w,\n/static/59ba460e6c4fa597eff33601850f88e0/e85cb/image-20200206142857331.png 480w,\n/static/59ba460e6c4fa597eff33601850f88e0/748f4/image-20200206142857331.png 656w\" sizes=\"(max-width: 656px) 100vw, 656px\" type=\"image/png\">\n        <img class=\"gatsby-resp-image-image\" src=\"/static/59ba460e6c4fa597eff33601850f88e0/748f4/image-20200206142857331.png\" alt=\"image-20200206142857331\" title=\"image-20200206142857331\" loading=\"lazy\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n      </picture>\n  </a>\n    </span>\n<p>Now, let’s import streamlit and make a bar chart. </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> streamlit <span class=\"token keyword\">as</span> st\nst<span class=\"token punctuation\">.</span>bar_chart<span class=\"token punctuation\">(</span>dfToShow<span class=\"token punctuation\">)</span></code></pre></div>\n<p>If you have a markdown cell, switch it to a code cell and surround it with triple quotes </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token triple-quoted-string string\">'''\n# Creating Web Apps with JN and Streamlit\n## Christian F. Jung\nchristianfjung.com\n\n**About this Project** \n\nThis project uses live poll data from 538 so the website will be update constantly!\n\n'''</span></code></pre></div>\n<p>We’ve done our preprocessing, added text, and  we’ve made a bar chart with streamlit. Now it’s time to make the app!</p>\n<p>For an easy one line solution, use this script that I made. Replace <code class=\"language-text\">YOURNOTEBOOKNAME</code> with the name of your .ipynb; <em>(do not include the file extension)</em>. Save your notebook, then run the following cell. </p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">! curl  https<span class=\"token punctuation\">:</span><span class=\"token operator\">//</span>scripts<span class=\"token punctuation\">.</span>christianfjung<span class=\"token punctuation\">.</span>com<span class=\"token operator\">/</span>JN<span class=\"token operator\">-</span>ST<span class=\"token punctuation\">.</span>sh <span class=\"token operator\">|</span> bash <span class=\"token operator\">-</span>s YOURNOTEBOOKNAME</code></pre></div>\n<p>If you prefer to write the script yourself use the following code instead:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">!jupyter nbconvert   <span class=\"token operator\">-</span><span class=\"token operator\">-</span>to script YOURNOTEBOOKNAME<span class=\"token punctuation\">.</span>ipynb\n!awk <span class=\"token string\">'!/ipython/'</span> YOURNOTEBOOKNAME<span class=\"token punctuation\">.</span>py <span class=\"token operator\">></span>  temp<span class=\"token punctuation\">.</span>py <span class=\"token operator\">&amp;</span><span class=\"token operator\">&amp;</span> mv temp<span class=\"token punctuation\">.</span>py app<span class=\"token punctuation\">.</span>py <span class=\"token operator\">&amp;</span><span class=\"token operator\">&amp;</span> rm YOURNOTEBOOKNAME<span class=\"token punctuation\">.</span>py\n!streamlit run app<span class=\"token punctuation\">.</span>py</code></pre></div>\n<p><strong>HOORAY!</strong> You now have a running web app and will see a screen that looks like this! Visit the local url to see your site in action. <em>(The cell will continue to run so the site stays active, to stop the site, stop the cell).</em></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 960px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a46ea6643d5012a10d35f27899ae2f4b/187fa/image-20200206144336077.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.628140703517587%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA5ElEQVQY012QiW7CMBBE+f9/awuEo9xQVRUJcRJfwomDXx1TEOpIo1nvakezHoUQMMagdaS501ob3zr1H/XrTKn7TCmV6Jx7ckTEerUim06YzzKWiznHw57P5YL9bst2s06913pQoxWyqRBCMIQaMGgyNFeP0G1iIR2V7bmojjpqLjty5VNdyJZSOUrdUWgf2XO34mmaDJ0PiLhQmltcaMmFJK8t51Lyc5F8Fw1noTAd2Dagrj2N9VSx4fvb0/AvYUC6wKYMnBr4qnsm43E6eZZN+Xh/S18xyyacjge0kvzHI92AX+GUfQnehEtZAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n        <source\n          srcset=\"/static/a46ea6643d5012a10d35f27899ae2f4b/8ac56/image-20200206144336077.webp 240w,\n/static/a46ea6643d5012a10d35f27899ae2f4b/d3be9/image-20200206144336077.webp 480w,\n/static/a46ea6643d5012a10d35f27899ae2f4b/e46b2/image-20200206144336077.webp 960w,\n/static/a46ea6643d5012a10d35f27899ae2f4b/de1dc/image-20200206144336077.webp 1194w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/a46ea6643d5012a10d35f27899ae2f4b/8ff5a/image-20200206144336077.png 240w,\n/static/a46ea6643d5012a10d35f27899ae2f4b/e85cb/image-20200206144336077.png 480w,\n/static/a46ea6643d5012a10d35f27899ae2f4b/d9199/image-20200206144336077.png 960w,\n/static/a46ea6643d5012a10d35f27899ae2f4b/187fa/image-20200206144336077.png 1194w\"\n          sizes=\"(max-width: 960px) 100vw, 960px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          src=\"/static/a46ea6643d5012a10d35f27899ae2f4b/d9199/image-20200206144336077.png\"\n          alt=\"image-20200206144336077\"\n          title=\"image-20200206144336077\"\n          loading=\"lazy\"\n          style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        />\n      </picture>\n  </a>\n    </span></p>\n<h4 id=\"what-does-the-script-do\" style=\"position:relative;\"><a href=\"#what-does-the-script-do\" aria-label=\"what does the script do permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>What does the script do?</h4>\n<ol>\n<li>Converts NB to .py: <code class=\"language-text\">jupyter nbconvert   --to script YOURNAME.ipynb</code></li>\n<li>Removes all ipython com</li>\n<li>mands (includes the call to the script):\n<code class=\"language-text\">awk &#39;!/ipython/&#39; YOURNAME.py &gt;  temp.py &amp;&amp; mv temp.py app.py &amp;&amp; rm YOURNAME.py</code></li>\n<li>Runs the local streamlit app:<code class=\"language-text\">streamlit run app.py</code></li>\n</ol>\n<hr>\n<p>For a complete working example, check out my <a href=\"https://github.com/ChristianFJung/NotebookToWebApp\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub repo</a> for this article. </p>\n<p>Share with me your web apps!  Feel free to ask questions and stayed tuned for my next article where we deploy this app to a website!</p>","fields":{"slug":"/posts/notebooks-to-web-apps","tagSlugs":["/tag/jupyter/","/tag/machine-learning/","/tag/web-apps/"]},"frontmatter":{"date":"2020-02-03T23:46:37.121Z","description":"Learn how to convert Jupyter Notebooks to a Web App using Streamlit.","tags":["Jupyter","Machine Learning","Web Apps"],"title":"Notebooks to Web Apps","socialImage":"/media/image-2.jpg"}}},"pageContext":{"slug":"/posts/notebooks-to-web-apps"}}}